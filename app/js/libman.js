(function(){
'use strict';var dx=function(){return new $APP.U(null,4,5,$APP.W,[$APP.up,new $APP.q(null,2,[ax,!0,$APP.Co,function(a){return $APP.Y.s(bx,$APP.X,0,a.target.value)}],null),new $APP.U(null,3,5,$APP.W,[$APP.cp,new $APP.q(null,1,[$APP.xq,"schematics"],null),"Public Schematics"],null),function(){return function c(b){return new $APP.qe(null,function(){for(;;){var d=$APP.E(b);if(d){if($APP.Fd(d)){var e=$APP.oc(d),f=$APP.J(e),g=$APP.te(f);a:for(var h=0;;)if(h<f){var l=$APP.pd(e,h),m=$APP.P(l,0,null);l=$APP.P(l,
1,null);m=new $APP.U(null,3,5,$APP.W,[$APP.cp,new $APP.q(null,2,[$APP.xq,m,$APP.Ji,m],null),$APP.Gi.g(l)],null);g.add(m);h+=1}else{e=!0;break a}return e?$APP.we($APP.ye(g),c($APP.pc(d))):$APP.we($APP.ye(g),null)}e=$APP.F(d);g=$APP.P(e,0,null);e=$APP.P(e,1,null);return $APP.R(new $APP.U(null,3,5,$APP.W,[$APP.cp,new $APP.q(null,2,[$APP.xq,g,$APP.Ji,g],null),$APP.Gi.g(e)],null),c($APP.Oc(d)))}return null}},null,null)}($APP.A(cx))}()],null)},hx=function(){return new $APP.U(null,4,5,$APP.W,[$APP.Gp,new $APP.q(null,
1,[ex,function(a){a.preventDefault();try{var b=new URL(a.target.dburl.value),c=b.pathname.substring(1);b.pathname="";return $APP.Y.s(cx,$APP.X,["databases:",c].join(""),new $APP.q(null,2,[$APP.Gi,c,fx,b.href],null))}catch(d){if(d instanceof TypeError)return c=a.target.dburl.value,$APP.Y.s(cx,$APP.X,["databases:",$APP.x.g(c)].join(""),new $APP.q(null,1,[$APP.Gi,c],null));throw d;}}],null),new $APP.U(null,2,5,$APP.W,[$APP.Zp,new $APP.q(null,4,[$APP.fp,"text",gx,"https://user:pw@host:port/database",
$APP.rp,"Add an online library by URL or a local one by name",$APP.Gi,"dburl"],null)],null),new $APP.U(null,2,5,$APP.W,[$APP.Zp,new $APP.q(null,2,[$APP.fp,"submit",$APP.xq,"Add library"],null)],null)],null)},sx=function(){return new $APP.U(null,2,5,$APP.W,[ix,$APP.jh(function(){return function c(b){return new $APP.qe(null,function(){for(;;){var d=$APP.E(b);if(d){var e=d;if($APP.Fd(e)){var f=$APP.oc(e),g=$APP.J(f),h=$APP.te(g);return function(){for(var t=0;;)if(t<g){var y=$APP.pd(f,t),v=$APP.P(y,0,
null),w=$APP.P(y,1,null),z=$APP.md(v.split(":"));$APP.xe(h,new $APP.U(null,4,5,$APP.W,[jx,new $APP.q(null,3,[$APP.Ji,v,kx,$APP.K.h(z,$APP.Q.h($APP.A(bx),1)),lx,function(H,I){return function(M){return $APP.u(M.target.open)?$APP.Y.s(bx,$APP.X,1,I):null}}(t,z,y,v,w,f,g,h,e,d)],null),new $APP.U(null,2,5,$APP.W,[mx,z],null),new $APP.U(null,2,5,$APP.W,[nx,$APP.jh(function(){return function(H,I,M,S,fa,da,V,na,ha,ta){return function pb(Na){return new $APP.qe(null,function(ub,Yb){return function(){for(;;){var Sb=
$APP.E(Na);if(Sb){if($APP.Fd(Sb)){var sc=$APP.oc(Sb),Mc=$APP.J(sc),hd=$APP.te(Mc);return function(){for(var vb=0;;)if(vb<Mc){var jd=$APP.pd(sc,vb),xd=$APP.P(jd,0,null);$APP.P(jd,1,null);jd=[$APP.x.g(Yb),"$",$APP.ch(xd)].join("");var yd=$APP.Q.i($APP.A(cx),$APP.F($APP.A(bx)),ox),ec=new URL("editor.html",window.location);ec.searchParams.append("schem",jd);ec.searchParams.append("db",$APP.Gi.h(yd,""));ec.searchParams.append("sync",fx.h(yd,""));hd.add(new $APP.U(null,4,5,$APP.W,[px,new $APP.q(null,1,
[$APP.Ji,xd],null),xd,new $APP.U(null,3,5,$APP.W,[$APP.nq,new $APP.q(null,1,[$APP.ep,ec.href],null),"edit"],null)],null));vb+=1}else return!0}()?$APP.we($APP.ye(hd),pb($APP.pc(Sb))):$APP.we($APP.ye(hd),null)}var wd=$APP.F(Sb),Ob=$APP.P(wd,0,null);$APP.P(wd,1,null);var id=[$APP.x.g(Yb),"$",$APP.ch(Ob)].join(""),Ud=$APP.Q.i($APP.A(cx),$APP.F($APP.A(bx)),ox);wd=function(){var vb=new URL("editor.html",window.location);vb.searchParams.append("schem",id);vb.searchParams.append("db",$APP.Gi.h(Ud,""));vb.searchParams.append("sync",
fx.h(Ud,""));return vb}();return $APP.R(new $APP.U(null,4,5,$APP.W,[px,new $APP.q(null,1,[$APP.Ji,Ob],null),Ob,new $APP.U(null,3,5,$APP.W,[$APP.nq,new $APP.q(null,1,[$APP.ep,wd.href],null),"edit"],null)],null),pb($APP.Oc(Sb)))}return null}}}(H,I,M,S,fa,da,V,na,ha,ta),null,null)}}(t,z,y,v,w,f,g,h,e,d)(qx.g(w))}())],null)],null));t+=1}else return!0}()?$APP.we($APP.ye(h),c($APP.pc(e))):$APP.we($APP.ye(h),null)}var l=$APP.F(e),m=$APP.P(l,0,null),n=$APP.P(l,1,null),r=$APP.md(m.split(":"));return $APP.R(new $APP.U(null,
4,5,$APP.W,[jx,new $APP.q(null,3,[$APP.Ji,m,kx,$APP.K.h(r,$APP.Q.h($APP.A(bx),1)),lx,function(t){return function(y){return $APP.u(y.target.open)?$APP.Y.s(bx,$APP.X,1,t):null}}(r,l,m,n,e,d)],null),new $APP.U(null,2,5,$APP.W,[mx,r],null),new $APP.U(null,2,5,$APP.W,[nx,$APP.jh(function(){return function(t){return function w(v){return new $APP.qe(null,function(){for(;;){var z=$APP.E(v);if(z){if($APP.Fd(z)){var H=$APP.oc(z),I=$APP.J(H),M=$APP.te(I);return function(){for(var na=0;;)if(na<I){var ha=$APP.pd(H,
na),ta=$APP.P(ha,0,null);$APP.P(ha,1,null);ha=[$APP.x.g(t),"$",$APP.ch(ta)].join("");var Ma=$APP.Q.i($APP.A(cx),$APP.F($APP.A(bx)),ox),Na=new URL("editor.html",window.location);Na.searchParams.append("schem",ha);Na.searchParams.append("db",$APP.Gi.h(Ma,""));Na.searchParams.append("sync",fx.h(Ma,""));M.add(new $APP.U(null,4,5,$APP.W,[px,new $APP.q(null,1,[$APP.Ji,ta],null),ta,new $APP.U(null,3,5,$APP.W,[$APP.nq,new $APP.q(null,1,[$APP.ep,Na.href],null),"edit"],null)],null));na+=1}else return!0}()?
$APP.we($APP.ye(M),w($APP.pc(z))):$APP.we($APP.ye(M),null)}var S=$APP.F(z),fa=$APP.P(S,0,null);$APP.P(S,1,null);var da=[$APP.x.g(t),"$",$APP.ch(fa)].join(""),V=$APP.Q.i($APP.A(cx),$APP.F($APP.A(bx)),ox);S=function(){var na=new URL("editor.html",window.location);na.searchParams.append("schem",da);na.searchParams.append("db",$APP.Gi.h(V,""));na.searchParams.append("sync",fx.h(V,""));return na}();return $APP.R(new $APP.U(null,4,5,$APP.W,[px,new $APP.q(null,1,[$APP.Ji,fa],null),fa,new $APP.U(null,3,5,
$APP.W,[$APP.nq,new $APP.q(null,1,[$APP.ep,S.href],null),"edit"],null)],null),w($APP.Oc(z)))}return null}},null,null)}}(r,l,m,n,e,d)(qx.g(n))}())],null)],null),c($APP.Oc(e)))}return null}},null,null)}($APP.A(rx))}())],null)},ux=function(){return new $APP.U(null,4,5,$APP.W,[$APP.Gp,new $APP.q(null,1,[ex,function(a){a.preventDefault();a=a.target.cell.value;var b=$APP.A(tx);return $APP.Y.s(b,$APP.X,["models:",$APP.x.g(a)].join(""),$APP.Oe)}],null),new $APP.U(null,2,5,$APP.W,[$APP.Zp,new $APP.q(null,
4,[$APP.fp,"text",gx,"cell name",$APP.rp,"Add a cell to the selected library",$APP.Gi,"cell"],null)],null),new $APP.U(null,2,5,$APP.W,[$APP.Zp,new $APP.q(null,2,[$APP.fp,"submit",$APP.xq,"Add cell"],null)],null)],null)},vx=function(){return new $APP.U(null,4,5,$APP.W,[$APP.Gp,new $APP.q(null,1,[ex,function(a){a.preventDefault();a=a.target.model.value;var b=$APP.Q.h($APP.A(bx),1),c=$APP.A(tx);return $APP.Y.s(c,$APP.no,new $APP.U(null,3,5,$APP.W,[["models:",$APP.x.g(b)].join(""),qx,a],null),$APP.Oe)}],
null),new $APP.U(null,2,5,$APP.W,[$APP.Zp,new $APP.q(null,4,[$APP.fp,"text",gx,"schematic name",$APP.rp,"Add a schematic to the selected cell",$APP.Gi,"model"],null)],null),new $APP.U(null,2,5,$APP.W,[$APP.Zp,new $APP.q(null,2,[$APP.fp,"submit",$APP.xq,"Add schematic"],null)],null)],null)},wx=function(){return new $APP.U(null,6,5,$APP.W,[ix,new $APP.U(null,1,5,$APP.W,[dx],null),new $APP.U(null,1,5,$APP.W,[hx],null),new $APP.U(null,1,5,$APP.W,[sx],null),new $APP.U(null,1,5,$APP.W,[ux],null),new $APP.U(null,
1,5,$APP.W,[vx],null)],null)},xx=function(){document.onkeyup=$APP.In.h($APP.Zn,$APP.Oe);return $APP.Nk(new $APP.U(null,1,5,$APP.W,[wx],null))},px=new $APP.T(null,"li","li",723558921),gx=new $APP.T(null,"placeholder","placeholder",-104873083),nx=new $APP.T(null,"ul","ul",-1349521403),ix=new $APP.T(null,"div","div",1057191632),kx=new $APP.T(null,"open","open",-1763596448),yx=new $APP.T(null,"schemnames","schemnames",1616452298),mx=new $APP.T(null,"summary","summary",380847952),ex=new $APP.T(null,"on-submit",
"on-submit",1227871159),zx=new $APP.T("nyancad.mosaic.libman","selected","nyancad.mosaic.libman/selected",-400142181),jx=new $APP.T(null,"details","details",1956795411),lx=new $APP.T(null,"on-toggle","on-toggle",-695538774),fx=new $APP.T(null,"url","url",276297046),ax=new $APP.T(null,"multiple","multiple",1244445549),qx=new $APP.T(null,"models","models",-1985455662);var Ax=$APP.Bj.g(new $APP.q(null,1,[zx,new $APP.U(null,3,5,$APP.W,[null,null,null],null)],null)),bx=$APP.Ik(Ax,new $APP.U(null,1,5,$APP.W,[zx],null)),cx=$APP.Tl(new $APP.lr("local"),"databases",$APP.Bj.g($APP.Oe)),Bx=$APP.Bj.g($APP.Oe),tx=$APP.$e(null),rx=$APP.Hk(function(){return $APP.Q.h($APP.A(Bx),$APP.F($APP.A(bx)))}),ox=new $APP.q(null,2,[$APP.Gi,"schematics",fx,"https://c6be5bcc-59a8-492d-91fd-59acc17fef02-bluemix.cloudantnosqldb.appdomain.cloud/"],null);
$APP.Hh(bx,yx,function(a,b,c,d){a=$APP.P(d,0,null);$APP.P(d,1,null);$APP.P(d,2,null);d=$APP.Q.i($APP.A(cx),a,ox);b=new $APP.lr($APP.Gi.g(d));$APP.af(tx,$APP.Tl(b,"models",$APP.Ik(Bx,new $APP.U(null,1,5,$APP.W,[a],null))));return $APP.u(fx.g(d))?$APP.lr.replicate((new URL($APP.Gi.g(d),fx.g(d))).href,b):null});$APP.ra("nyancad.mosaic.libman.init",xx);try{xx()}catch(a){throw console.error("An error occurred when calling (nyancad.mosaic.libman/init)"),a;};
}).call(this);